@use '@angular/material' as mat;

// 1. Define your Material 3 Color Palettes
// M3 uses primary, secondary, tertiary, and neutral palettes.
$my-primary-palette: mat.$azure-palette;
$my-tertiary-palette: mat.$blue-palette;

// 2. Define the Theme Map
// This unified map replaces the old M2 individual palette definitions.
$my-theme: mat.define-theme((
  color: (
    theme-type: dark, // or light
    primary: $my-primary-palette,
    tertiary: $my-tertiary-palette,
    use-system-variables: true // Enables CSS variables for runtime overrides
  ),
  typography: (
    brand-family: 'Roboto, "Helvetica Neue", sans-serif',
    plain-family: 'Roboto, "Helvetica Neue", sans-serif',
  ),
  density: (
    scale: 0 // Options: 0, -1, -2, -3, -4
  )
));

// 3. Application-wide Styles
:root {
  // Apply all component themes
  @include mat.all-component-themes($my-theme);
  
  // Custom global overrides using M3 Design Tokens
  // Example: Adjusting the default border radius for all buttons
  --md-sys-shape-corner-extra-small: 4px;
}

// 4. Custom Component Theme Mixin Example
// This follows the rule of passing the $theme map into custom components.
@mixin custom-component-styles($theme) {
  .app-sidebar {
    background-color: mat.get-theme-color($theme, surface-container);
    color: mat.get-theme-color($theme, on-surface);
    border-right: 1px solid mat.get-theme-color($theme, outline-variant);
    
    // Using TS 5.9 / Sass modularity for responsive typography
    font: mat.get-theme-typography($theme, body-medium, font);
  }
}

// Apply the custom mixin
@include custom-component-styles($my-theme);